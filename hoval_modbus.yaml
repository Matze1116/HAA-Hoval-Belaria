# ========================================
# HOVAL BELARIA 13 PRO - MODBUS TCP
# ========================================
# IP: 192.168.10.170
# Port: 502
# Konfiguration: Nur HC1, kein Pufferspeicher
# ========================================

- name: "Hoval Belaria"
  type: tcp
  host: 192.168.10.170
  port: 502
  delay: 2
  timeout: 10
  
  # ========================================
  # SENSOREN - Alle Messwerte
  # ========================================
  sensors:
    # === WARMWASSER (WW) ===
    - name: "Hoval Warmwasser Ist Oben"
      address: 1500
      unit_of_measurement: "°C"
      scan_interval: 15
      scale: 0.1
      precision: 1
      device_class: temperature
      
    - name: "Hoval Warmwasser Ist Unten"
      address: 27483
      unit_of_measurement: "°C"
      scan_interval: 15
      scale: 0.1
      precision: 1
      device_class: temperature
      
    - name: "Hoval Warmwasser Soll"
      address: 1499
      unit_of_measurement: "°C"
      scan_interval: 20
      scale: 0.1
      precision: 1
      device_class: temperature
      
    - name: "Hoval Warmwasser Status"
      address: 1504
      scan_interval: 15
      
    - name: "Hoval Warmwasser Thermische Energie"
      address: 27488
      data_type: uint32
      unit_of_measurement: "MWh"
      scan_interval: 60
      scale: 0.001
      precision: 3
      device_class: energy
      state_class: total_increasing
      
    # === WÄRMEPUMPE (WP) ===
    - name: "Hoval FA Status"
      address: 18723
      scan_interval: 10
      
    - name: "Hoval Modulation"
      address: 18726
      unit_of_measurement: "%"
      scan_interval: 20
      
    - name: "Hoval Erzeugervorlauf Ist"
      address: 18725
      unit_of_measurement: "°C"
      scan_interval: 15
      scale: 0.1
      precision: 1
      device_class: temperature
      
    - name: "Hoval Erzeugervorlauf Soll"
      address: 18724
      unit_of_measurement: "°C"
      scan_interval: 20
      scale: 0.1
      precision: 1
      device_class: temperature
      
    - name: "Hoval Erzeuger Betriebsmeldung"
      address: 18737
      scan_interval: 10
      
    - name: "Hoval Fehlercode"
      address: 1534
      scan_interval: 10
      
    # === LEISTUNG & ENERGIE ===
    - name: "Hoval Elektrische Leistung"
      address: 25611
      unit_of_measurement: "kW"
      scan_interval: 20
      scale: 0.01
      precision: 2
      device_class: power
      state_class: measurement
      
    - name: "Hoval Thermische Leistung"
      address: 25612
      unit_of_measurement: "kW"
      scan_interval: 20
      scale: 1
      precision: 2
      device_class: power
      state_class: measurement
      
    - name: "Hoval Leistungsabgabe Aktuell"
      address: 18731
      data_type: uint32
      unit_of_measurement: "kW"
      scan_interval: 20
      scale: 0.1
      precision: 1
      device_class: power
      state_class: measurement
      
    - name: "Hoval Elektrische Gesamtenergie"
      address: 25613
      data_type: uint32
      unit_of_measurement: "MWh"
      scan_interval: 60
      scale: 0.001
      precision: 3
      device_class: energy
      state_class: total_increasing
      
    - name: "Hoval Thermische Gesamtenergie Heizen"
      address: 27484
      data_type: uint32
      unit_of_measurement: "MWh"
      scan_interval: 60
      scale: 0.001
      precision: 3
      device_class: energy
      state_class: total_increasing
      
    - name: "Hoval Thermische Gesamtenergie Kühlen"
      address: 27486
      data_type: uint32
      unit_of_measurement: "MWh"
      scan_interval: 60
      scale: 0.001
      precision: 3
      device_class: energy
      state_class: total_increasing
      
    # === BETRIEBSSTUNDEN ===
    - name: "Hoval Betriebsstunden"
      address: 1507
      data_type: uint32
      unit_of_measurement: "h"
      scan_interval: 300
      scale: 0.1
      precision: 1
      device_class: duration
      state_class: total_increasing
      
    - name: "Hoval Schaltzyklen"
      address: 1518
      data_type: uint32
      scan_interval: 300
      state_class: total_increasing
      
    # === TEMPERATUREN HEIZKREIS ===
    - name: "Hoval Vorlauftemperatur"
      address: 1513
      unit_of_measurement: "°C"
      scan_interval: 15
      scale: 0.1
      precision: 1
      device_class: temperature
      
    - name: "Hoval Rücklauftemperatur"
      address: 1535
      unit_of_measurement: "°C"
      scan_interval: 15
      scale: 0.1
      precision: 1
      device_class: temperature
      
    # === HEIZKREIS 1 (HC1) ===
    - name: "Hoval Heizkreis Status"
      address: 1501
      scan_interval: 15
      
    - name: "Hoval Heizkreis Vorlauf Soll"
      address: 19562
      unit_of_measurement: "°C"
      scan_interval: 20
      scale: 0.1
      precision: 1
      device_class: temperature
      
    - name: "Hoval Heizkreis Raum Ist"
      address: 1493
      unit_of_measurement: "°C"
      scan_interval: 15
      scale: 0.1
      precision: 1
      device_class: temperature
      
    - name: "Hoval Heizkreis Raum Soll"
      address: 1481
      unit_of_measurement: "°C"
      scan_interval: 20
      scale: 0.1
      precision: 1
      device_class: temperature
      
    - name: "Hoval Heizkreis Pumpe"
      address: 19706
      scan_interval: 20
      
    - name: "Hoval Heizkreis Mischer"
      address: 19658
      scan_interval: 20
      
    # === PUMPEN ===
    - name: "Hoval Pumpe Wärmeerzeuger"
      address: 18757
      unit_of_measurement: "%"
      scan_interval: 20
      
  # ========================================
  # CLIMATE - Heizungs-Steuerung
  # ========================================
  climates:
    # === HEIZKREIS 1 ===
    - name: "Hoval Heizkreis"
      address: 1493              # Aktuelle Raumtemperatur
      target_temp_register: 1481 # Raum-Solltemperatur
      scale: 0.1
      precision: 1
      temp_step: 0.5
      min_temp: 10
      max_temp: 30
      hvac_mode_register:
        address: 1478
        values:
          state_off: 0
          state_heat: 4
          state_cool: 9         # Falls Kühlung aktiviert ist
          
    # === WARMWASSER ===
    - name: "Hoval Warmwasser"
      address: 1500             # Aktuelle WW-Temperatur
      target_temp_register: 1497 # WW-Solltemperatur
      scale: 0.1
      precision: 1
      temp_step: 1
      min_temp: 40
      max_temp: 65
      hvac_mode_register:
        address: 1496
        values:
          state_off: 0
          state_heat: 1
          
  # ========================================
  # SWITCHES - Betriebsarten-Steuerung
  # ========================================
  switches:
    # === HEIZKREIS BETRIEBSARTEN ===
    - name: "Hoval Heizen Normal"
      address: 1478
      write_type: holding
      command_on: 4   # Heizen Normal
      command_off: 0  # Aus
      
    - name: "Hoval Heizen Komfort"
      address: 1478
      write_type: holding
      command_on: 2   # Heizen Komfort
      command_off: 4  # Zurück auf Normal
      
    - name: "Hoval Heizen Eco"
      address: 1478
      write_type: holding
      command_on: 3   # Heizen Spar
      command_off: 4  # Zurück auf Normal
      
    - name: "Hoval Frostschutz"
      address: 1478
      write_type: holding
      command_on: 1   # Frostschutz
      command_off: 4  # Zurück auf Normal
      
    - name: "Hoval Kühlen"
      address: 1478
      write_type: holding
      command_on: 9   # Kühlen Normal
      command_off: 4  # Zurück auf Heizen
      
    # === WARMWASSER STEUERUNG ===
    - name: "Hoval Warmwasser Ein"
      address: 1496
      write_type: holding
      command_on: 1   # WW Ein
      command_off: 0  # WW Aus
      
    # === STANDBY ===
    - name: "Hoval Standby"
      address: 1478
      write_type: holding
      command_on: 0   # Aus
      command_off: 4  # Heizen Normal
